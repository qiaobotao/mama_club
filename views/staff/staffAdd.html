<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>添加员工</title>
    <link href="../../css/global.css" rel="stylesheet" type="text/css" />
    <link href="../../css/index.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../../js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="../../js/layer/layer.js"></script>
    <script type="text/javascript" src="../../js/laydate/laydate.js"></script>
    <style type="text/css">
        html,body{height:100%;padding:0;margin:0;}
    </style>
    <script type="text/javascript">
        function submitForm(){
            var name = document.getElementById("name").value;
            if (!name || name.length == 0) {
                alert('门店名称不能为空');
                return;
            }
            var serialNumber = document.getElementById("serialNumber").value;
            if (!serialNumber || serialNumber.length == 0) {
                alert('序列号不能为空');
                return;
            }
            /*
             var tel = document.getElementById("tel").value;
             if (!tel || tel.length == 0) {
             alert('电话不能为空');
             return;
             }
             var address = document.getElementById("address").value;
             if(!address || address.length == 0) {
             alert('门店地址不能为空');
             return;
             }
             var principal = document.getElementById("principal").value;
             if (!principal || principal.length == 0) {
             alert('负责人不能为空');
             return;
             }
             */
            document.getElementById("myform").submit();
        }

        //当前孩子显示位置
        var childIndex = 0;
        //table中增加需要添加的行信息（子女）
        function addChildTr(){
            var tableId = 'childrenTableId';
            //获取表格对象
            var table=document.getElementById("childrenTableId");
            //获取当前行数
            childIndex = $("#childrenTableId tr").length;
            var row=table.insertRow(childIndex);
            var cell1=row.insertCell(0);//孩子名称
            var cell2=row.insertCell(1);//孩子生日
            var cell3=row.insertCell(2);//性别
            var cell4=row.insertCell(3);//排行
            var cell5=row.insertCell(4);//删除本行
            cell1.innerHTML = '<td><input name="childrenName" type="text" class="input5" /></td>';
            cell2.innerHTML='<td><input name="childrenBirth" type="text" class="input5" readonly onclick="laydate()"/></td>';
            cell3.innerHTML='<td><select name="childrenSex"><option value="男">男</option><option value="女">女</option></select></td>';
            cell4.innerHTML='<td><input name="childrenRank" type="text" class="input5" /></td>';
            cell5.innerHTML='<td><a style="cursor: pointer" onclick="javaScript:delTr(1,this)"><h1>-</h1></a></td>';
        }
        //当前合同显示位置
        var contractIndex = 0;
        //table中增加需要添加的行信息（合同）
        function addContractTr(){
            //获取表格对象
            var table=document.getElementById("contractTableId");
            //获取当前行数
            contractIndex = $("#contractTableId tr").length;
//            alert("contractIndex="+contractIndex);
            var row=table.insertRow(contractIndex);
            var cell1=row.insertCell(0);//开始时间
            var cell2=row.insertCell(1);//截止时间
            var cell3=row.insertCell(2);//说明
            var cell5=row.insertCell(3);//删除本行
            cell1.innerHTML = '<td><input name="contractStartDate" type="text" class="input5" readonly onclick="laydate()" /></td>';
            cell2.innerHTML='<td><input name="contractEndDate" type="text" class="input5" readonly onclick="laydate()" /></td>';
            cell3.innerHTML='<td><input name="contractRemarks" type="text" class="input5" /></td>';
            cell5.innerHTML='<td><a style="cursor: pointer" onclick="javaScript:delTr(2,this)"><h1>-</h1></a></td>';
        }
        //当前职业资质显示位置
        var qualificationsIndex = 0;
        //table中增加需要添加的行信息（职业资格）
        function addQualificationsTr(){
            //获取表格对象
            var table=document.getElementById("qualificationsTableId");
            //获取当前行数
            qualificationsIndex = $("#qualificationsTableId tr").length;
//            alert("qualificationsIndex="+qualificationsIndex);
            var row=table.insertRow(qualificationsIndex);
            var cell1=row.insertCell(0);//职业资质
            var cell2=row.insertCell(1);//获取证书时间
            var cell3=row.insertCell(2);//说明
            var cell4=row.insertCell(3);//上传图片
            var cell4=row.insertCell(4);//删除本行
            cell1.innerHTML = '<td><input name="vocationalQualifications" type="text" class="input5" /></td>';
            cell2.innerHTML='<td><input name="qualificationsTime" type="text" class="input5"  readonly onclick="laydate()"/></td>';
            cell2.innerHTML='<td><input name="qualificationsDescribe" type="text" class="input5" /></td>';
            cell3.innerHTML='<td><input name="qualificationsImage" type="text" class="input5" /></td>';
            cell4.innerHTML='<td><a style="cursor: pointer" onclick="javaScript:delTr(3,this)"><h1>-</h1></a></td>';
        }
        //table中增加需要添加的行信息（考勤周期）
        function addAttendanceTypesTr(){
            var attendanceList = '<%-JSON.stringify(attendanceList)%>';
            attendanceList = JSON.parse(attendanceList);

            var selectAttendanceType = "";
            for(var j = 0 ; j < attendanceList.length ; j ++){
                selectAttendanceType += "<option value='"+attendanceList[j].id+"'>"+attendanceList[j].categoryName+"</option>";
            }

            //获取表格对象
            var table=document.getElementById("attendanceTypesTableId");
            //获取当前行数
            var attendanceTypesIndex = $("#attendanceTypesTableId tr").length;
            var row=table.insertRow(attendanceTypesIndex);
            var cell1=row.insertCell(0);//考勤名称
            var cell2=row.insertCell(1);//开始时间
            var cell3=row.insertCell(2);//截止时间
            var cell4=row.insertCell(3);//状态
            var cell5=row.insertCell(4);//备注
            var cell6=row.insertCell(5);//删除本行
            cell1.innerHTML = '<td><select name="attendanceId">'+selectAttendanceType+'</select></td>';
            cell2.innerHTML='<td><input name="attendanceStartDate" type="text" class="input5" readonly onclick="laydate()"/></td>';
            cell3.innerHTML='<td><input name="attendanceEndDate" type="text" class="input5" readonly onclick="laydate()"/></td>';
            cell4.innerHTML='<td>未启用</td>';
            cell5.innerHTML='<td><input name="attendanceRank" type="text" class="input5"/></td>';
            cell6.innerHTML='<td><a style="cursor: pointer" onclick="javaScript:delTr(4,this)"><h1>-</h1></a></td>';
        }
        //table中删除选中的行数据
        function delTr(tableId,delObj){
            var deltr = delObj.parentNode.parentNode;
            if(tableId == 1){//员工
                $('#childrenTableId tr:eq('+deltr.rowIndex+')').remove();
            }
            if(tableId == 2){//合同
                $('#contractTableId tr:eq('+deltr.rowIndex+')').remove();
            }
            if(tableId == 3){//职业资格
                $('#qualificationsTableId tr:eq('+deltr.rowIndex+')').remove();
            }
            if(tableId == 4){//考勤周期
                $('#attendanceTypesTableId tr:eq('+deltr.rowIndex+')').remove();
            }
        }
    </script>
</head>

<body>
<div class="r_top">
    <div class="weizhi">
        当前位置：员工
    </div>
</div>
<div class="center_con">
    <form method="post" id="myform" action="/jinquan/staff_save">
        <table width="100%" class="reg_table"border="0" cellspacing="0" cellpadding="0">
            <tr>
                <td class="regTd_l">名称：</td>
                <td class="regTd_r">
                    <input id="name" name="name" type="text" class="input5" value="<%=staff.name%>"/>&nbsp;&nbsp;<span style="color:#FF0000;">*</span>
                    <input id="id" name="id" type="hidden" value="<%=staff.id%>"/>
                </td>
                <td  class="regTd_l">编码：</td>
                <td class="regTd_r"><input id="serialNumber" name="serialNumber" type="text" class="input5" value="<%=staff.serialNumber%>" />&nbsp;&nbsp;<span style="color:#FF0000;">*</span></td>
            </tr>
            <tr>
                <td class="regTd_l">电话：</td>
                <td class="regTd_r"><input id="tel" name="tel" type="text" class="input5" value="<%=staff.tel%>" />&nbsp;&nbsp;<span style="color:#FF0000;">*</span></td>
                <td class="regTd_l">身份证：</td>
                <td class="regTd_r"><input id="idCard" name="idCard" type="text" class="input5" value="<%=staff.idCard%>" />&nbsp;&nbsp;<span style="color:#FF0000;">*</span></td>
            </tr>
            <tr>
                <td class="regTd_l">出生日期：</td>
                <td class="regTd_r"><input id="birthDate" name="birthDate" type="text" class="input5" value="<%=staff.birthDate%>" readonly onclick="laydate()"/>&nbsp;&nbsp;<span style="color:#FF0000;">*</span></td>
                <td class="regTd_l">最高学历：</td>
                <td class="regTd_r"><input id="highestEducation" name="highestEducation" type="text" class="input5" value="<%=staff.highestEducation%>" />&nbsp;&nbsp;<span style="color:#FF0000;">*</span></td>
            </tr>
            <tr>
                <td class="regTd_l">毕业院校：</td>
                <td class="regTd_r"><input id="graduationSchool" name="graduationSchool" type="text" class="input5" value="<%=staff.graduationSchool%>" />&nbsp;&nbsp;<span style="color:#FF0000;">*</span></td>
                <td class="regTd_l">配偶名称：</td>
                <td class="regTd_r"><input id="spouseName" name="spouseName" type="text" class="input5" value="<%=staff.spouseName%>" />&nbsp;&nbsp;<span style="color:#FF0000;">*</span></td>
            </tr>
            <tr>
                <td class="regTd_l">联系电话：</td>
                <td class="regTd_r"><input id="spouseTel" name="spouseTel" type="text" class="input5" value="<%=staff.spouseTel%>" />&nbsp;&nbsp;<span style="color:#FF0000;">*</span></td>
                <td class="regTd_l">邮箱地址：</td>
                <td class="regTd_r"><input id="email" name="email" type="text" class="input5" value="<%=staff.email%>" />&nbsp;&nbsp;<span style="color:#FF0000;">*</span></td>
            </tr>
            <tr>
                <td class="regTd_l">入职时间：</td>
                <td class="regTd_r"><input id="startJobTime" name="startJobTime" type="text" class="input5" value="<%=staff.startJobTime%>" readonly onclick="laydate()"/>&nbsp;&nbsp;<span style="color:#FF0000;">*</span></td>
                <td class="regTd_l">是否在职：</td>
                <td class="regTd_r"><input id="isJob" name="isJob" type="text" class="input5" value="<%=staff.isJob%>" />&nbsp;&nbsp;<span style="color:#FF0000;">*</span></td>
            </tr>
            <tr>
                <td class="regTd_l">离职时间：</td>
                <td class="regTd_r"><input id="endJobTime" name="endJobTime" type="text" class="input5" value="<%=staff.endJobTime%>" readonly onclick="laydate()"/>&nbsp;&nbsp;<span style="color:#FF0000;">*</span></td>
                <td class="regTd_l">所属门店：</td>
                <td class="regTd_r">
                    <select id="shopId" name="shopId">
                        <option value="">请选择</option>
                        <%
                            for(var i = 0 ; i< shopList.length ; i ++){
                                %><option value="<%=shopList[i].id%>" <%if(staff.shopId == shopList[i].id){%>selected<%}%>><%=shopList[i].name%></option><%
                            }
                        %>
                    </select>
                    <span style="color:#FF0000;">*</span>
                </td>
            </tr>
            <tr>
                <td class="regTd_l">打卡机编号：</td>
                <td class="regTd_r"><input id="clockCode" name="clockCode" type="text" class="input5" value="<%=staff.clockCode%>" />&nbsp;&nbsp;<span style="color:#FF0000;">*</span></td>
                <td class="regTd_l">员工等级：</td>
                <td class="regTd_r">
                    <select id="staffLevel" name="staffLevel">
                        <option value="">请选择</option>
                        <%
                        for(var i = 0 ; i < staffLevelList.length ; i++){
                            %><option value="<%=staffLevelList[i].id%>" <%if(staff.staffLevel == staffLevelList[i].id){%>selected<%}%>><%=staffLevelList[i].name%></option><%
                        }
                        %>
                    </select>
                </td>
            </tr>
            <tr>
                <td class="regTd_l" >备注：</td>
                <td class="regTd_r"><input id="remarks" name="remarks" type="text" class="input5" value="<%=staff.remarks%>" />&nbsp;&nbsp;<span style="color:#FF0000;">*</span></td>
            </tr>
        </table>
        <!-- 考勤周期信息 start-->
        <span style="float: left; font-weight:bold;width: 100px;">考勤周期信息</span>
        <br>
        <table id="attendanceTypesTableId" width="80%" class="reg_table"border="0" cellspacing="0" cellpadding="0">
            <tr bgcolor="lightblue">
                <td>考勤名称</td>
                <td>开始时间</td>
                <td>截止时间</td>
                <td>状态</td>
                <td>备注</td>
                <td><a style="cursor: pointer" onclick="javaScript:addAttendanceTypesTr()"><h1>+</h1></a></td>
            </tr>
            <%
            for(var i = 0 ; i< attendanceTypes.length ; i ++){
            %>
            <tr>
                <td>
                    <%
                    for(var j = 0 ; j < attendanceList.length ; j ++){
                        if(attendanceList[j].id == attendanceTypes[i].attendanceId){
                            %><%=attendanceList[j].categoryName%><%
                            break;
                        }
                    }
                    %>
                    <input name="attendanceId" type="hidden" value="<%=attendanceTypes[i].attendanceId%>"/>
                </td>
                <td><input name="attendanceStartDate" type="text" class="input5" value="<%=attendanceTypes[i].attendanceStartDate%>" readonly onclick="laydate()"/></td>
                <td><input name="attendanceEndDate" type="text" class="input5" value="<%=attendanceTypes[i].attendanceEndDate%>" readonly onclick="laydate()"/></td>
                <td>
                    <%
                    //如果当前考勤周期开始时间 < 当前时间：已执行
                    //如果当前考勤周期开始时间 > 当前时间 并且 截止时间 < 当前时间：正在执行
                    //如果当前考勤周期截止时间 < 当前时间：未执行
                    if(1==1){
                        %>未执行<%
                    }
                    %>
                </td>
                <td><input name="attendanceRank" type="text" class="input5" value="<%=attendanceTypes[i].attendanceRank%>" /></td>
                <td><a style="cursor: pointer" onclick="javaScript:delTr(4,this)"><h1>-</h1></a></td>
            </tr>
            <%
            }
            %>
        </table>
        <!-- 考勤周期信息 end-->
        <!--子女信息 start-->
        <span style="float: left; font-weight:bold;width: 100px;">子女信息</span>
        <br>
        <table id="childrenTableId" width="80%" class="reg_table"border="0" cellspacing="0" cellpadding="0">
            <tr bgcolor="lightblue">
                <td>子女姓名</td>
                <td>出生日期</td>
                <td>性别</td>
                <td>排行</td>
                <td><a style="cursor: pointer" onclick="javaScript:addChildTr()"><h1>+</h1></a></td>
            </tr>
            <%
            for(var i = 0 ; i< children.length ; i ++){
            %>
            <tr>
                <td><input name="childrenName" type="text" class="input5" value="<%=children[i].childrenName%>"/></td>
                <td><input name="childrenBirth" type="text" class="input5" value="<%=children[i].childrenBirth%>" readonly onclick="laydate()"/></td>
                <td>
                    <select name="childrenSex"><option value="男" <%if(children[i].childrenSex == '男'){%>selected<%}%>>男</option><option value="女" <%if(children[i].childrenSex == '女'){%>selected<%}%>>女</option></select>
                </td>
                <td><input name="childrenRank" type="text" class="input5" value="<%=children[i].childrenRank%>" /></td>
                <td><a style="cursor: pointer" onclick="javaScript:delTr(1,this)"><h1>-</h1></a></td>
            </tr>
            <%
            }
            %>
        </table>
        <!--子女信息 end-->
        <!--合同信息 start-->
        <span style="float: left; font-weight:bold;width: 100px;">合同信息</span>
        <br>
        <table id="contractTableId" width="40%" class="reg_table"border="0" cellspacing="0" cellpadding="0">
            <tr bgcolor="lightblue">
                <td>开始时间</td>
                <td>截止时间</td>
                <td>说明</td>
                <td><a style="cursor: pointer" onclick="javaScript:addContractTr()"><h1>+</h1></a></td>
            </tr>
            <%
            for(var i = 0 ; i< contracts.length ; i ++){
            %>
            <tr>
                <td><input id="contractStartDate" name="contractStartDate" type="text" class="input5" value="<%=contracts[i].contractStartDate%>" readonly onclick="laydate()" /></td>
                <td><input id="contractEndDate" name="contractEndDate" type="text" class="input5"  value="<%=contracts[i].contractEndDate%>" readonly onclick="laydate()"/></td>
                <td><input id="contractRemarks" name="contractRemarks" type="text" class="input5" value="<%=contracts[i].contractRemarks%>" /></td>
                <td><a style="cursor: pointer" onclick="javaScript:delTr(2,this)"><h1>-</h1></a></td>
            </tr>
            <%
            }
            %>
        </table>
        <!--合同信息 end-->
        <!--职业资质信息 start-->
        <span style="float: left; font-weight:bold;width: 100px;">职业资质信息</span>
        <br>
        <table id="qualificationsTableId" width="60%" class="reg_table"border="0" cellspacing="0" cellpadding="0">
            <tr bgcolor="lightblue">
                <td>职业资质</td>
                <td>获取时间</td>
                <td>资质描述</td>
                <td>上传图片</td>
                <td><a style="cursor: pointer" onclick="javaScript:addQualificationsTr()"><h1>+</h1></a></td>
            </tr>
            <%
            for(var i = 0 ; i< certificates.length ; i ++){
            %>
            <tr>
                <td><input id="vocationalQualifications" name="vocationalQualifications" value="<%=certificates[i].vocationalQualifications%>" type="text" class="input5" /></td>
                <td><input id="qualificationsTime" name="qualificationsTime" type="text" value="<%=certificates[i].qualificationsTime%>" class="input5"  readonly onclick="laydate()"/></td>
                <td><input id="qualificationsDescribe" name="qualificationsDescribe" type="text" value="<%=certificates[i].qualificationsDescribe%>" class="input5" /></td>
                <td><input id="qualificationsImage" name="qualificationsImage" type="text" value="<%=certificates[i].qualificationsImage%>" class="input5" /></td>
                <td><a style="cursor: pointer" onclick="javaScript:delTr(3,this)"><h1>-</h1></a></td>
            </tr>
            <%
            }
            %>
        </table>
        <!--职业资质信息 end-->
    </form>
    <div class="reg_but">
        <div class="rb_l"><a href="javascript:;" onclick="submitForm()" class="reset"></a></div>
        <div class="rb_l"><a href=/jinquan/staff_list class="close"></a></div>
    </div>


</div>
</body>
</html>
