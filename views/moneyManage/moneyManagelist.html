<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>收费管理列表</title>
    <link href="../../css/global.css" rel="stylesheet" type="text/css" />
    <link href="../../css/index.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../../js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="../../js/layer/layer.js"></script>
    <script type="text/javascript" src="../../js/laydate/laydate.js"></script>
    <style type="text/css">
        html,body{height:100%;padding:0;margin:0;}
    </style>
    <script type="text/javascript" src="../../js/layer/layer.js"></script>
    <script type="text/javascript">

        var replytype = '<%=replytype%>';
        if (replytype == 'add') {
            parent.layer.msg('增加成功');
        } else if (replytype == 'del') {
            parent.layer.msg('删除成功');
        } else if (replytype == 'update') {
            parent.layer.msg('修改成功');
        } else if (replytype == 'error') {
            parent.layer.msg('数据填写错误，请查证后再提交');
        }
        function search () {
            var chargeName = document.getElementById('chargeName').value;
            var chargeStartTime = document.getElementById('chargeStartTime').value;
            var chargeEndTime = document.getElementById('chargeEndTime').value;
            window.location.href = '/jinquan/money_manage_list?chargeName='+chargeName+'&chargeStartTime='+chargeStartTime+'&chargeEndTime='+chargeEndTime;
        }
        function pageturning (selectPage) {
            var shopname = document.getElementById('shopname').value;
            var principal = document.getElementById('principal').value;
            var number = document.getElementById('number').value;
            window.location.href = '/jinquan/shop_list?page='+selectPage+'&shopname='+shopname+'&principal='+principal+'&number='+number;
        }
        function setStatus (status, id) {
            var shopname = document.getElementById('shopname').value;
            var principal = document.getElementById('principal').value;
            var number = document.getElementById('number').value;
            var page = document.getElementById('page').value;
            window.location.href = '/jinquan/shop_set?page='+page+'&shopname='+shopname+'&principal='+principal+'&number='+number+'&status='+status+'&id='+id;
        }
        function preEdit (id) {
            window.location.href = '/jinquan/money_manage_edit?id='+id;
        }
        function del (id) {

            window.location.href = '/jinquan/money_manage_del?id='+id;
        }
        function browse (id) {
            window.location.href = '/jinquan/shop_browse?id='+id;
        }

    </script>
</head>

<body>
<div class="r_top">
    <div class="weizhi">
        当前位置：收费管理列表
    </div>
</div>
<div class="center_con">
    <div class="butSet">
        <div class="sousuo">
            <table width="100%" class="table4" border="0" cellspacing="0" cellpadding="0">
                <tr>
                    <!-- 保存当前页，直接传入js，不能读到-->
                    <td><input id="page" name="page" type="hidden" class="input5" value="<%=data.currentPage%>"/></td>
                    <td>付费人名称：<input id="chargeName" name="chargeName" type="text" class="input5" value="<%=data.name%>"/></td>
                    <td> &nbsp;付费类型：
                        <select name="chargeType">
                            <option value="">请选择</option>
                            <option value="1">护理付费</option>
                            <option value="2">上课付费</option>
                            <option value="3">购买商品</option>
                            <option value="4">购买会员卡</option>
                            <option value="5">员工内购</option>
                            <option value="6">会员卡续费</option>
                        </select>
                    </td>
                    <td> &nbsp;付费时间：
                        <input id="chargeStartTime" name="chargeStartTime" type="text" class="input5" value="<%=data.chargeStartTime%>" readonly onclick="laydate({format: 'YYYY-MM-DD'})"/>~
                        <input id="chargeEndTime" name="chargeEndTime" type="text" class="input5" value="<%=data.chargeEndTime%>" readonly onclick="laydate({format: 'YYYY-MM-DD'})"/>
                    </td>
                    <td><a href="javascript:search()" class="chaxun"></a></td>
                </tr>
            </table>

        </div>
        <div class="but_0"><a href="/jinquan/money_manage_edit" class="bsty0"></a></div>
    </div>
    <div class="tabCon">
        <table width="100%" class="table3" cellpadding="0"  cellspacing="0">
            <tr>
                <th>付费人名称</th>
                <th>收费类型</th>
                <th>交易时间</th>
                <th>应收金额</th>
                <th>实收金额</th>
                <th>支付方式</th>
                <th>状态</th>
                <th>操作</th>
            </tr>
            <% for (var i=0;i<data.data.length;i++) {%>
            <tr onmouseover="this.className='f_on'" class="f_off"  onmouseout="this.className='f_off'">
                <%

                var payer = "";
                var chargeTypeVal = data.data[i].chargeType;
                var chargeTypeTxt = "";
                if(chargeTypeVal == 1){
                    chargeTypeTxt = "护理付费";
                    payer = data.data[i].memberName;
                }else if (chargeTypeVal == 2){
                    chargeTypeTxt = "上课付费";
                    payer = data.data[i].memberName;
                }else if (chargeTypeVal == 3){
                    chargeTypeTxt = "购买商品";
                    payer = data.data[i].memberName;
                }else if (chargeTypeVal == 4){
                    chargeTypeTxt = "购买会员卡";
                    payer = data.data[i].memberName;
                }else if (chargeTypeVal == 5){
                    chargeTypeTxt = "员工内购";
                    payer = data.data[i].staffName;
                }else if (chargeTypeVal == 6){
                    chargeTypeTxt = "会员卡续费";
                    payer = data.data[i].memberName;
                }
                %>
                <td><%=payer%></td>
                <td><%=chargeTypeTxt%></td>
                <td><%=data.data[i].chargeTime%></td>
                <td><%=data.data[i].receivableMoney%></td>
                <td><%=data.data[i].actualMoney%></td>
                <td><%=data.data[i].payType%></td>
                <td><%=data.data[i].state%></td>
                <td>
                    <table width="100%" border="0" cellspacing="0" class="table_t"  cellpadding="0">
                        <tr>
                            <td><div align="center"><img src="../../images/index_2.jpg" width="9" height="9" />&nbsp;[<a href="javascript:browse(<%=data.data[i].id%>)">查看</a>]</div></td>
                            <td><div align="center"><img src="../../images/037.gif" width="9" height="9" />&nbsp;[<a href="javascript:preEdit(<%=data.data[i].id%>)">编辑</a>]</div></td>
                            <td><div align="center"><img src="../../images/delete.gif" width="9" height="9" />&nbsp;[<a href="javascript:del(<%=data.data[i].id%>)">删除</a>]</div></td>
                        </tr>
                    </table>
                </td>
            </tr>
            <%}%>
        </table>

        <!-- <%- include ../pagination.html -%>   -->
        <%- laypage %>
    </div>
</div>

</body>
</html>
